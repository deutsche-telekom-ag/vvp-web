{% extends 'base.html' %}
{% block title %} VVP {% endblock %}
{% block titlebar_title %}{% endblock %}
{% block head %}
    {{ super() }}
    <link rel="stylesheet" href="/static/css/progress.css"/>
    <script src="/static/js/progressbar.min.js"></script>
    <script src="/static/js/results.js"></script>

{% endblock %}
{% block body %}
    <div class="site-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center">
        <h1 class="display-4">VNF Validation Project</h1>
        <p class="lead">The validation completed successfully. Please check out the results below.</p>
    </div>
    <div class="container">
        <div class="card-deck mb-3 text-center">
            <div class="card mb-4 box-shadow">
                <div class="card-header">
                    <h4 class="my-0 font-weight-normal">Passed</h4>
                </div>
                <div class="card-body">
                    <div id="circle-passed" class="cprogress"></div>
                </div>
            </div>
            <div class="card mb-4 box-shadow">
                <div class="card-header">
                    <h4 class="my-0 font-weight-normal">Skipped</h4>
                </div>
                <div class="card-body">
                    <div id="circle-skipped" class="cprogress"></div>
                </div>
            </div>
            <div class="card mb-4 box-shadow">
                <div class="card-header">
                    <h4 class="my-0 font-weight-normal">Failed</h4>
                </div>
                <div class="card-body">
                    <div id="circle-failed" class="cprogress"></div>
                </div>
            </div>
            <div class="card mb-1 box-shadow container">
                <div class="card-header">
                    <h4 class="my-0 font-weight-normal">Summary</h4>
                </div>
                <div class="card-body table-responsive">
                    <div class="container">
                        <table class="table table-hover text-left" style="table-layout:fixed;width: 100%;">
                            <thead>
                            <tr>
                                <th scope="col" style="width: 10%;"></th>
                                <th scope="col" style="width: 10%;">Result</th>
                                <th scope="col" style="width: 65%;">Test</th>
                                <th scope="col" style="width: 15%;">Duration</th>
                                <!--<th scope="col">Log</th>-->
                            </tr>
                            </thead>
                            <tbody>
                            {% for indx in items %}
                                <TR>
                                    <td class="text-center">
                                        {% if items[indx]["result"] != "passed" %}
                                            <a data-toggle="collapse" href="#collapse-id{{ indx }}">
                                                <i class="icon icon-solid icon-add clickable" aria-hidden="true"></i>
                                            </a>
                                        {% endif %}
                                    </td>
                                    <TD class="text-center">{% if items[indx]["result"] == "passed" %}
                                        <i class="icon icon-solid icon-confirm text-success" aria-hidden="true"></i>
                                    {% elif items[indx]["result"] == "failed" %}
                                        <i class="icon icon-solid icon-cancel text-danger" aria-hidden="true"></i>
                                    {% else %}
                                        <i class="icon icon-solid icon-skip-to-end text-warning" aria-hidden="true"></i>
                                    {% endif %}
                                    </TD>
                                    <TD>{{ items[indx]["name"] }}</TD>
                                    <TD>{{ items[indx]["duration"] }}s</TD>
                                </TR>
                                {% if items[indx]["log"] %}
                                    <tr>
                                        <td colspan="4" style="word-break:break-all;">
                                            <div class="container collapse" data-parent="#collapse-id{{ indx }}"
                                                 id="collapse-id{{ indx }}">

                                                <div class="card card-body container-fluid text-left text-small">
                                                    <pre style="width: 100%;">{{ items[indx]["log"] }}</pre>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                {% endif %}
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <input id="val-pass" type="hidden" value="{{ result['pass'] }}"/>
    <input id="val-skip" type="hidden" value="{{ result['skip'] }}"/>
    <input id="val-fail" type="hidden" value="{{ result['fail'] }}"/>
    <input id="val-total" type="hidden" value="{{ result['total'] }}"/>
{% endblock %}